var iframeId,iid,handleSetupResponse,testData,spongeapi=spongeapi||{},spongecell=spongecell||{};iid=window.location.search.slice(1),spongeapi.initComplete=!1,spongeapi.callbackIndex=0,spongeapi.messagesReceived={},spongeapi.onHover=function(e,n,a){var i,s=null;e||(s=n,e=document);var t=200,o=32,p=null,l=null,g=function(e){p=e.pageX,l=e.pageY},c=null,r=null,d=null,m=function(){"undefined"!=typeof p&&null!==p&&"undefined"!=typeof l&&null!==l&&"undefined"!=typeof r&&null!==r&&"undefined"!=typeof d&&null!==d&&Math.abs(p-r)+Math.abs(l-d)<o?(s&&(s(),s=null),e.removeEventListener("mousemove",g),n!==s&&n(),i&&(c=setTimeout(m,i))):(r=p,d=l,c=setTimeout(m,t))},u=function(e){var n=this.globalToLocal(stage.mouseX,stage.mouseY),a=this.nominalBounds.width,i=this.nominalBounds.height;p=n.x>0&&n.x<a?n.x:null,l=n.y>0&&n.y<i?n.y:null};a?(canvas.addEventListener("mouseover",function(e){var n=this.globalToLocal(stage.mouseX,stage.mouseY);r=n.x,d=n.y,canvas.addEventListener("mousemove",u.bind(this),!1),c=setTimeout(m,t)}.bind(e),!1),canvas.addEventListener("mouseout",function(e){canvas.removeEventListener("mousemove",g),p=l=null,clearTimeout(c)})):(e.addEventListener("mouseenter",function(n){r=n.pageX,d=n.pageY,e.addEventListener("mousemove",g),c=setTimeout(m,t)}),e.addEventListener("mouseleave",function(n){e.removeEventListener("mousemove",g),p=l=null,clearTimeout(c)}))};var engageCallback=function(){parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",engagement:!0}),"*")};spongeapi._removeAnimation=function(){var e=document.getElementById("expanding-animation");if(e){var n=e.parentNode;n.parentNode.removeChild(n),clearTimeout(spongeapi.expandingTimeout)}},spongeapi._setupOpenCountdown=function(){var e,n,a,i,s,t,o,p;e=2700,o=window.innerHeight,t=window.innerWidth,p=100,document.body.removeEventListener("mouseout",spongeapi._removeAnimation),spongeapi.expandingTimeout=setTimeout(spongeapi.openPanel,e),(t<120||o<120)&&(a=Math.min(t,o),i=(a/120).toFixed(1),s="-ms-transform: scale("+i+","+i+");\n-webkit-transform: scale("+i+","+i+");\ntransform: scale("+i+","+i+");"),document.getElementById("expanding-animation")||(n=document.createElement("div"),n.style.zIndex=p,n.innerHTML='<div id="expanding-animation" style="\nwidth: '+t+"px;\nheight: "+o+'px;\nz-index: 100;">\n<div class="expanding-wrapper" '+(s?"style='"+s+"'":"")+' >\n<div class="round-wrapper">\n<div class="circle one"></div>\n<div class="circle two"></div>\n<div class="circle three"></div>\n<div class="one number"><span>1</span></div>\n<div class="two number"><span>2</span></div>\n<div class="three number"><span>3</span></div>\n</div>\n<div class="expanding-text">Expanding</div>\n</div>\n</div>',document.body.appendChild(n),document.body.addEventListener("mouseout",spongeapi._removeAnimation),n.addEventListener("click",function(){spongeapi._removeAnimation(),spongeapi.openPanel()}))},spongeapi.openPanelOnHover=function(e){spongeapi.onHover(e,spongeapi._setupOpenCountdown)},spongeapi.init=function(e,n,a,i){iid=window.location.search.slice(1),window.spongecell=window.spongecell||{},e.type?(spongeapi.type=e.type,spongeapi.initObj=e.initObj,spongeapi.isDynamic=e.isDynamic,spongeapi.onReady=e.onReady):(spongeapi.type=e,spongeapi.initObj=n,spongeapi.isDynamic=a,spongeapi.onReady=i),window==parent.top?(spongcell={},handleSetupResponse()):parent.postMessage(JSON.stringify({type:"api",topic:"setup",iid:iid,callback:"handleSetupResponse"}),"*")},spongeapi.openScreen=function(e,n){n=n||{},window!=parent.top?n&&n.engagement?parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",engage:!0,screen:e,transition:n.transition}),"*"):parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",engage:!1,screen:e,transition:n.transition}),"*"):console.log("openScreen("+e+","+n+")")},spongeapi._bindCallback=function(e,n){var a=0;spongeapi.messagesReceived[e]=null;var i=setInterval(function(){var s=spongeapi.messagesReceived[e];null!==s&&(n(s.data),delete spongeapi.messagesReceived[e],clearInterval(i)),a++,20===a&&clearInterval(i)},50)},spongeapi._sendMessageWithCallback=function(e,n){if(n){var a=spongeapi.callbackIndex++;e.callbackParams=e.callbackParams||{},e.callbackParams.callbackIndex=a,spongeapi._bindCallback(a,n)}parent.postMessage(JSON.stringify(e),"*")},spongeapi.openLanding=function(e,n){e=e||{};var a=e.hasOwnProperty("landingPage")?e.landingPage:e,i=e.trackOnly||!1,s=e.queryParams||"";n=e.hasOwnProperty("itemIndex")?e.itemIndex:n;var t="__default";if("undefined"!=typeof n?t={itemIndex:n,landingPageKey:a}:spongecell.apiData.landingPages[a]&&(t=spongecell.apiData.landingPages[a]),window!=parent.top){var o=i?null:function(e){window.open(e.url,"_blank")};spongeapi._sendMessageWithCallback({iid:iid,topic:"nav",type:"api",landingPage:t,queryParams:s},o)}else console.log("openLanding("+a+"): "+t)},spongeapi.openPanel=function(){window!=parent.top&&parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",panel:{open:!0}}),"*")},spongeapi._getDynamicIndex=function(e,n,a){if(!spongecell.apiData.dynamicItems)return null;for(var i in spongecell.apiData.dynamicItems)if(spongecell.apiData.dynamicItems[i][a]&&spongecell.apiData.dynamicItems[i][a][n]&&spongecell.apiData.dynamicItems[i][a][n][e])return spongecell.apiData.dynamicItems[i][a][n][e];return null},spongeapi._getDynamic=function(e,n,a,i){return spongecell.apiData&&spongecell.apiData[n]&&spongecell.apiData[n][e]?(e=spongecell.apiData[n][e],"undefined"!=typeof a&&(e=spongeapi._getDynamicIndex(e[i],n,a)),spongeapi._trackViewed(e),e):null},spongeapi._trackViewed=function(e){e&&e.itemUuid&&parent.postMessage(JSON.stringify({type:"api",topic:"tracking",iid:iid,viewedItem:e}),"*")},spongeapi.getDynamicText=function(e,n){var a=this._getDynamic(e,"properties",n,"propId");return a&&a.text},spongeapi.getDynamicImage=function(e,n){var a=this._getDynamic(e,"assets",n,"id");return a?a.url:this.getDynamicText(e,n)},spongeapi.parseEdge=function(){for(var e in spongecell.apiData.properties){var n=spongeapi.initObj.$(e);n&&n.html(spongecell.apiData.properties[e].text)}for(var e in spongecell.apiData.assets)try{var n=spongeapi.initObj.$(e);n&&n.css({"background-image":"url("+spongecell.apiData.assets[e].src+")"})}catch(a){console.log(a)}},spongeapi.parseDynamicCanvasImages=function(){for(var e,n=0;e=lib.properties.manifest[n];n++)spongecell.apiData.assets.hasOwnProperty(e.id)&&(e.crossOrigin="Anonymous",e.src=spongeapi.getDynamicImage(e.id))},spongeapi.parseDynamicCanvasText=function(){for(var e in spongecell.apiData.properties)exportRoot[e]&&(exportRoot[e].txt.text=spongeapi.getDynamicText(e))},spongeapi.parseDynamicClasses=function(){var e;for(var n in spongecell.apiData.properties)if(e=document.getElementsByClassName(n),e.length>0)for(var a=0;a<e.length;a++)e[a].innerHTML=spongeapi.getDynamicText(n);else(e=document.getElementById(n))&&(e.innerHTML=spongeapi.getDynamicText(n));for(var n in spongecell.apiData.assets)if(e=document.getElementsByClassName(n),e.length>0)for(var a=0;a<e.length;a++)e[a].src=spongeapi.getDynamicImage(n),e[a].setAttribute("source",spongeapi.getDynamicImage(n));else(e=document.getElementById(n))&&(e.src=spongeapi.getDynamicImage(n),e.setAttribute("source",spongeapi.getDynamicImage(n)))},spongeapi.getMacro=function(e){return!(!spongecell.hasOwnProperty("apiData")||!spongecell.apiData.spongecellParams[e])&&spongecell.apiData.spongecellParams[e]},handleSetupResponse=function(e){if(!spongeapi.initComplete){switch(spongeapi.onHover(document.body,engageCallback),window.spongecell.apiData=e||{},!spongecell.apiData.assets&&testData&&(spongecell.apiData=testData),spongeapi.type){case"canvas":spongeapi.isDynamic&&spongecell.apiData.assets&&spongeapi.parseDynamicCanvasImages(),spongeapi.initObj.loadManifest(lib.properties.manifest);var n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;n&&createjs&&(createjs.DisplayObject.prototype.setTransform=function(e,n,a,i,s,t,o,p,l){if(this.x=e||0,this.y=n||0,this.scaleX=null==a?1:a,this.scaleY=null==i?1:i,this.rotation=s||0,this.skewX=t||0,this.skewY=o||0,this.regX=p||0,this.regY=l||0,this.text&&this.getMeasuredLineHeight){var g=this.getMeasuredLineHeight();this.textBaseline="top",g=g>12&&g<50?.3*this.getMeasuredLineHeight():g>49?.2*this.getMeasuredLineHeight():g<=12?.1*this.getMeasuredLineHeight():.2*this.getMeasuredLineHeight(),this.y=Math.floor(this.y+g)}return this});break;case"gwd":spongeapi.initObj.initAd(),spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseDynamicClasses();break;case"edge":spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseEdge();break;case"custom":spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseDynamicClasses()}spongeapi.onReady&&spongeapi.onReady()}spongeapi.initComplete=!0},window.addEventListener("message",function(event){var message=event.data;if(message)if(message.callback)eval(message.callback)(message.data);else if(message.callbackParams&&"undefined"!=typeof message.callbackParams.callbackIndex){var callbackIndex=message.callbackParams.callbackIndex;"undefined"!=typeof spongeapi.messagesReceived[callbackIndex]&&(spongeapi.messagesReceived[callbackIndex]=message)}});