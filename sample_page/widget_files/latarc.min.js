window.trb||(trb={}),trb.userTiming?trb.userTiming("reg before main"):trb.userTiming=function(){},function e(){var t=(window.i$||window).jQuery;t?function(e){function n(e,t){var n,r,a,o,i,l,c,d=e.merge(trb.registration||[],window.registration||[]),g=window.location,u=navigator.userAgent,p=trb.registration=window.registration={version:4,jQuery:e};p.template=n={parse:function(t,r){t||(t=""),r||(r={});var a,o,i=this.templates,s=r.onClick,l=1==t.length?t[0]:(o=t.split("."))&&o[0]in i&&i[o[0]][o[1]]||i[t];return l?(s&&(s=function(e){e.preventDefault(),r.onClick.call(this,e)}),e.each(e.makeArray(r),function(t,r){var i={},c=l.replace(/\$\{([^\}]*)\}/g,function(e,t){if(!(t in i)){var a=t in r?r[t]:(o=t.split(".")[1])&&o in r?r[o]:r;i[t]=null==a?"":a.jquery?a:/(object|array)/.test(typeof a)?n.parse(t,a):a.toString()}return i[t].jquery?'<b data-tmpl="'+t+'" />':i[t]});/data-tmpl/.test(c)&&e("b[data-tmpl]",c=e("<div />").html(c)).each(function(){var t=e(this);t.replaceWith(i[t.attr("data-tmpl")])}),c=c.jquery?c.contents().click(s||function(){}):s?(/^<.*>$/.test(c)?e(c):e("<span />").html(c)).click(s):c,a=a?a[a.jquery?"add":"concat"](c):c}),a||""):""},templates:{}},function(){p.config=r={get:function(e){return e in t?t[e]:null},set:function(n,r){"string"==typeof n?t[n]=r:e.extend(!0,t,n)}},r.set({regPath:t.registrationHostname.replace(/\/?$/,"/registration/"),cookieDomain:t.regCookieDomain||(/^[\d.]+$/.test(g.host)?g.host:"."+(g.host.split(".").length<3?g.host:g.host.replace(/^.*?\./,"")))})}(),function(){var t={};p.events=a={on:function(e,n){(t[e]||(t[e]=[])).push(n)},next:function(n,r){this.on(n,function a(o){var i=t[n];i[e.inArray(a,i)]=function(){},r(o)})},fire:function(n,r){e.each(t[n]||[],function(e,t){t(r)})}}}(),p.utils=o={cookies:{enabled:function(){this.set("c_","1");var e=this.get("c_");return this.del("c_"),!!e},get:function(e){var t=document.cookie.split(e+"=");return t.length>1?unescape(t[1].split(";")[0]):""},set:function(e,t,n){document.cookie=e+"="+escape(t)+";expires="+new Date(~n?864e5*(n||180)+(new Date).getTime():0).toGMTString()+";path=/;domain="+r.get("cookieDomain")},del:function(e){this.set(e,"",-1)}},url:{get:function(t){var n={},r=t.search;return r&&e.each(r.substr(1).split("&"),function(e,t){var r=t.split("=");r.length>1?n[r.shift()]=decodeURIComponent(r.join("=")):n[t]=!0}),n},set:function(t,n){var r=[];return e.each(n||{},function(e,t){var n="_"==e[0];r.push(e.substr(n)+(t?"="+(n?encodeURIComponent(t):t):""))}),r.length?(t=t.split("#"))[0]+(/\?/.test(t[0])?"&":"?")+r.join("&")+(t[1]?"#"+t[1]:""):t},del:function(e,t){var n=g.href.replace(e,"").replace("?&","?").replace(/(\?|&)#/,"#").replace(/(\?|&|#)$/,"");if(!t)return n;try{g.hash=g.hash,history.replaceState?history.replaceState(history.state,document.title,n):o.redirectUser(n)}catch(r){}}},script:function f(t,n,r,o,i,s){function l(e){return n in t?(e&&trb.userTiming("reg "+n+" response"),!a.fire("reg_queue_"+n,t[n])):void 0}if(a.next("reg_queue_"+n,o),!l()&&!f[n]){if(trb.userTiming("reg "+n+" request"),f[n]=!0,i&&!/iPhone|iPad|iPod/.test(u)){var c=e("head");e.each(i,function(e,t){var n=/c/.test(t)?"crossorigin":"";e=(/s/.test(t)?"https:":"")+"//"+e,(/p/.test(t)||n)&&(!/MSIE|Trident|Safari/.test(u)||/Chrome|Android|CriOS/.test(u))&&c.append('<link rel="preconnect" href="'+e+'" '+n+" />"),/d/.test(t)&&c.append('<link rel="dns-prefetch" href="'+e+'" />')})}e.ajax({url:"//"+r,dataType:"script",cache:!0,success:function d(){!l(!0)&&setTimeout(d,50)},error:function(){s&&s()}})}},redirectUser:function(t){t=e("<a />").attr("href",t).attr("href"),g.href.split("#")[0]==t.split("#")[0]?g.reload():g[g.href.split("?")[0]==t.split("?")[0]?"replace":"assign"](t)},checkCompatible:function(t,n){return/Android/.test(u)&&!/Chrome/.test(u)&&parseFloat(u.match(/Android ((\d\.)+)/)[1])<4.4?t?(e(".reg-title, form > :not(.reg-cancel)",t).addClass("disabled"),void e(".reg-content",t).prepend('<div class="reg-disabled">'+(e("html").is("[data-dss-meterup]")?"Premium subscription access and other advanced features are not supported":"You must log in or register to continue, but we do not support this feature")+' in the version of Android Browser you are using due to a security flaw. Please use the <a href="https://play.google.com/store/apps/details?id=com.android.chrome" target="_blank" rel="noopener">Google Chrome</a> browser or upgrade your Android operating system to continue.</div>')):c.showMessageDialog():!0},cache:function(e,t,n){try{if(window.localStorage){var r,a=new Date;if(n){if((r=localStorage.getItem(e))&&(r=JSON.parse(r))&&a.setDate(a.getDate()-n)<new Date(r.cachedDate))return t&&t(r),!0}else null!=t?(t.cachedDate||(t.cachedDate=a),localStorage.setItem(e,JSON.stringify(t))):localStorage.removeItem(e)}}catch(o){}},poll:function(t,n,r){t&&function a(){var o=e(t,r);o.length||"body"!=t&&!("limit"in a?--a.limit:a.limit=100)?n(o):setTimeout(a,50)}()}},p.ajax=i={_send:function(t,n){var a=e.extend(!0,n.prefix?{}:{data:e.extend({product_code:r.get("productCode"),master_id:l.getMasterId()},i.stateless)},t,n),o=a.callback||r.get("ajaxErrors")||function(){},s={url:(a.prefix||r.get("regPath"))+a.url,type:"GET",data:a.data,dataType:"jsonp",cache:!1,success:function(e){if(i.stateless&&!i.stateless.signon_token&&e.loginToken&&(i.stateless.signon_token=e.loginToken),a.callback)a.callback(e);else{var t=e.err||e.errMsg||e.errorMessage||e.errorThrown;t?o(t):a.success(e)}},error:function(){o("There was a network issue; please try again later")}};"password"in s.data&&this._cors(s),s.url&&e.ajax(s)}},function(){var t={},n="trb.registration.userData";p.user=l={importUserData:function(n){e.each(t,function(e){delete t[e]}),e.extend(t,n)},exportUserData:function(){return t},getMasterId:function(){return t.masterId||""},setMasterId:function(e){t.masterId=e||""},getConsumerId:function(){return t.consumerId||""},getUsername:function(){return t.userName||""},getFirstName:function(){return t.firstName||""},getLastName:function(){return t.lastName||""},getDisplayName:function(){return t.displayName||this.getUsername()},isLoggedIn:function(){return!!this.getMasterId()},getZipCode:function(){return t.zipCode||""},getEmailAddress:function(){var n=e.makeArray(t.linkedIdentifiers);return(t.email||n.length&&n[0].emailAddress||"").toLowerCase()},getBirthDate:function(){return t.birthDate||""},getBirthYear:function(){return t.birthYear||""},getIncome:function(){return t.incomeLevel||""},getGender:function(){return t.gender||""},getTos:function(){return t.tos||""}},l.setMasterId(o.cookies.get("c_mId")),o.cache(n,function(e){l.getMasterId()==e.masterId?l.importUserData(e):o.cache(n)},180)}(),function(){function t(t){var n=this.handler=e(this).attr(s);n in p.nav?p.nav[n].call(this):p.push(n),!this.allowed&&t.preventDefault()}var n="data-reg-loggedin",i="data-reg-username",s="data-reg-handler",d="["+s+"]",u="data-reg-rendered",f=r.get("navSelector");e("head").append("<style>"+r.get("navigationCSS")+"</style>"),e.extend(p,{nav:{signInHandler:function(){p.nav._link.call(this,r.get("signInUrl"),c.showLoginDialog)},signUpHandler:function(){p.nav._link.call(this,r.get("signUpUrl"),c.showRegistrationDialog)},profileHandler:function(){p.nav._link.call(this,r.get("navProfileUrl"),c.showProfileDialog)},newsletterHandler:function(){p.nav._link.call(this,r.get("navNewsletterUrl"),c.showNewsletterDialog)},signOutHandler:function(){c.user.logout()},toggleNavigation:function(){function t(a){"click"!=a.type&&~e(d,r).index(a.target)||(e("body").off("click touchstart",t),r.removeClass("navShow"),a.target==n&&(a.stopPropagation(),a.preventDefault()))}var n=this,r=e(n).parent().addClass("navShow");e("body").on("click touchstart",t)},_link:function(t,n){if(o.checkCompatible())if(t){this.allowed=!0;var r=e(this);"^"==t[0]&&(r.attr({target:"_blank",rel:"noopener"}),t=t.substr(1)),a.fire("reg_handler_click",this),r.attr("href",t.replace("${return}",encodeURIComponent(g.href)))}else n&&n()},_update:function(){l.isLoggedIn()?e("html").attr(n,""):e("html").removeAttr(n),c.user.get(function(){o.poll(f,function(t){t.not("["+u+"]").attr(u,u).append('<a href="#" data-reg-handler="signInHandler" data-reg-text="Sign In"></a><span data-reg-role="navspace" data-reg-text=" or "></span><a href="#" data-reg-handler="signUpHandler" data-reg-text="Sign Up"></a><a href="#" data-reg-handler="toggleNavigation" data-reg-username=""></a><ul data-reg-role="minimodal"><li><a href="#" data-reg-handler="profileHandler" data-reg-text="Profile"></a></li><li><a href="#" data-reg-handler="newsletterHandler" data-reg-text="Newsletters"></a></li><li><a href="#" data-reg-handler="signOutHandler" data-reg-text="Sign Out"></a></li></ul>'),e("["+i+"]").attr(i,l.getDisplayName()),trb.userTiming("reg after nav")})})}},showDialog:function(e,t){var n={register:"Registration",login:"Login",forgot:"Password",userProfile:"Profile",newsletters:"Newsletter"};e in n&&c["show"+n[e]+"Dialog"](t)},push:function(){var t={user:c.user.get,login:c.user.login,logout:c.user.logout,logoutin:c.user.switchAccounts,event:a.on,fire:a.fire,modal:p.showDialog,show:p.showDialog,reauth:c.user.reauthenticate,solidopinion:trb.vendor.solidopinion.enable};return e.each(e.makeArray(arguments),function(n,r){if(e.isFunction(r))r(p);else{if("string"==typeof r){var a={};a[r]=null,r=a}e.each(r,function(e,n){var r=e.split("-"),a=r.shift();e in t?t[e](n):r.length&&a in t&&t[a](r.join("-"),n)})}}),0}}),e().on.length>3?e(document).on("click",d,t):e().delegate?e(document).delegate(d,"click",t):e(d).live("click",t)}(),p.manager=c={user:{get:function(e){function t(){e&&e(l)}!l.isLoggedIn()||l.getConsumerId()?t():c._load("getInfo",t)},login:function(e,t){c._load(function(){a.next("reg_after_login",t||function(){}),l.setMasterId(e),c.user.getInfo()})},logout:function(e){c.user.setInfo(null,e)},switchAccounts:function(){c.user.logout(c.showLoginDialog)},rename:function(e,t){var n=/[\d?!@#$%^&*"`=~_+,:;|<>(){}\[\]\\\/]/g;c._load("setProfile",{firstName:(e||"").replace(n,""),lastName:(t||"").replace(n,"")})},setInfo:function(e,t){e!==!0&&l.importUserData(e),c.user[e?"setCookies":"delCookies"](),p.nav._update(),a.fire("reg_after_log"+(e?"in":"out"),!!t),t&&t()},delCookies:function(){o.cache("trb.registration.userData"),o.cache("trb.registration.authToken"),o.cookies.del("c_mId")},reauthenticate:function(e){c._load("reauthenticate",e)}},showMessageDialog:function(){c._load("showMessageDialog")},showLoginDialog:function(e){c._load("showLoginDialog",e,l.isLoggedIn())},showRegistrationDialog:function(e){c._load("showRegistrationDialog",e,l.isLoggedIn())},showWelcomeDialog:function(e){c._load("showWelcomeDialog",e)},showPasswordResetDialog:function(e){c._load("showPasswordResetDialog",e)},showPasswordDialog:function(e){c._load("showPasswordDialog",e)},showNameInterceptDialog:function(e){c._load("showNameInterceptDialog",e)},showProfileDialog:function(e){c._load("showProfileDialog",e,l.isLoggedIn())},showNewsletterDialog:function(e){c._load(function(){c.showProfileDialog(e,!0)})},_load:function(t,n,a){t in c&&!a&&!e("#reg-overlay").length&&e("body").append('<div id="reg-overlay" />'),o.script(p,"dialog",r.get("ssorBaseUrl")+"/reg/tribune/assets/"+r.get("dialogJS"),function(){(c[t]||c.user[t]||t)(n)})}},function(){var t=trb.vendor||(trb.vendor={}),n=trb.data&&trb.data.metrics&&trb.data.metrics.ga;t.solidopinion={enable:function(n){var r=t.solidopinion,i=e("div.so_"+(n?"promo_headline_wrap":"comments"));o.script(window,"$SO","embed.solidopinion.com/so_wl.js",function(t){function o(n){var a=l.getUsername(),o=e("[data-reg-username]",r.nav);null!=n&&o.attr("data-reg-text")!=a&&t.callAction(n?"update-user-profile":"login-tronc-user"),o.add("div.so-reg-login [data-reg-username]").attr("data-reg-text",a)}function s(n,r){function i(){function e(){c.user.getInfo(function(){l.nameConfirmed()?(o(),i.play()):(c.showNameInterceptDialog(i),i.wait())})}l.isLoggedIn()?e():(a.next("reg_close_login",e),i.wait(),c.showRegistrationDialog({events:{onClose:function(e){!e&&i.stop()}}}))}i.wait=function(){!r&&t.callAction("suspend-user-"+(r=n?"action":"login")),e("html").focus()},i.play=function(){r&&t.callAction("resume-user-"+r+(n?"":"-with-tronc"))},i.stop=function(){r&&t.callAction("cancel-user-"+r)},a.fire("reg_before_comment",i),!i.intercept&&i()}r.nav||(e("head").append('<style>.so-reg-login{font:12px Arial,sans-serif !important}.so-reg-login a{color: #333;text-decoration: none}.so_comments [data-reg-text]:before{content:attr(data-reg-text)}[data-reg-loggedin] .so_comments [data-reg-handler=show-register],.so_comments [data-reg-handler=signOutHandler]{display:none}[data-reg-loggedin] .so_comments [data-reg-handler=signOutHandler]{display:inline-block}[data-reg-loggedin] .so_comments [data-reg-role="navspace"]{display:inline}.so_comments [data-reg-username]{color:#333}</style>'),r.nav=e('<div class="so-reg-login" data-reg-role="base" data-reg-rendered="data-reg-rendered"><a href="#" data-reg-handler="signInHandler" data-reg-text="Log In"></a><span data-reg-username=""></span><span data-reg-role="navspace" data-reg-text=" | "></span><a href="#" data-reg-handler="show-register" data-reg-text="Register"></a><a href="#" data-reg-handler="signOutHandler" data-reg-text="Log Out"></a></div>'),t.setConfig({contentId:i.attr("data-content-id"),publisherId:i.attr("data-publisher"),autoLoginByTronc:!0,sitename:i.attr("data-sitename")}),t.on("user-login-request",s),a.on("reg_after_login",o),a.on("reg_after_logout",function(){e("[data-reg-username]").removeAttr("data-reg-text"),t.callAction("logout-user")}),t.on("user-action-request",function(e){/(add(-promo)?|reply)-comment/.test(e.actionType)&&s(!0)}),t.on("user-action-success",function(e){/(add(-promo)?|reply)-comment/.test(e.actionType)&&a.fire("reg_after_comment")})),n?(t.on("hide-wph-popup-success",n),t.callAction("show-wph-popup")):(t.callAction("start-widget","so_comments"),function d(){i.length!=e("iframe",i).length?setTimeout(d,50):c._load(function(){i.each(function(){var t=e(this);e("div.so-reg-login",t).length||(e("iframe",t).before(r.nav.clone()),c.user.getInfo(function(){}))})})}())},{"sopublic.solidopinion.com":"d","tcd.solidopinion.com":"d","duzt8zhfirl2o.cloudfront.net":"dp"})}},t.omniture={track:function(a){var o=Array.prototype.slice.call(arguments,1,arguments.length),i=t.omniture,l=this;!n&&function c(){if(window.s){var t=r.get("metricsAccountId"),n=function d(t){var n=i.events[t];return e.extend(!0,n.parent?d(n.parent):{},n)}(a);t&&s.sa(t),e.extend(s,s.slug?{}:s.getPageVars?s.getPageVars():{contentType:s.prop38,slug:s.prop44},n.props),e.each(n.input||[],function(e,t){s[t]=o[e]}),e.each(n.props,function(e,t){/^s\./.test(t)&&(s[e]=s[t.substr(2)])}),s.tl(l!=i?l:!0,"o",s.prop57)}else("limit"in c?--c.limit:c.limit=100)&&setTimeout(c,250)}()},events:{base:{props:{linkTrackEvents:"s.events",prop38:"s.prop57",eVar65:"s.channel",eVar66:"s.pageName",eVar67:"s.contentType"}}}},t.googleanalytics={track:function(r,a){n&&function o(){if(window.ga){var n=t.googleanalytics.events[r];a=e.extend({dimension112:"tracker"},a),n.metric&&(a["metric"+n.metric]=1),ga("trb.send","event","DSS",n.label,a)}else("limit"in o?--o.limit:o.limit=100)&&setTimeout(o,250)}()},events:{profile:{label:"account nav click",metric:70},newsletter:{label:"newsletter nav click",metric:69}}}}(),function(){var t="events,server,prop28,prop33,prop34,prop57,prop62,prop74,eVar20,eVar21,eVar34,eVar35,eVar36,eVar37,eVar38,eVar39,eVar51",n=trb.vendor.googleanalytics,o=trb.vendor.omniture,i=o.events.base.props,s={linkTrackVars:t+",prop1,prop20"};p.getMetricsId=l.getConsumerId,o.src=i.eVar54="digital subscription panel",e.extend(s,i),i.eVar21="s.prop57",e.extend(o.events,{navbar:{props:s},profile:{parent:"navbar",props:{prop57:"navbar click profile",events:"event82"}},newsletter:{parent:"navbar",props:{prop57:"navbar click newsletters",events:"event83"}},comment:{parent:"base",props:{linkTrackVars:t+",eVar7,eVar28,eVar40,eVar68",prop57:"comment",events:"event7",eVar21:"s.contentType",eVar34:"s.channel",eVar35:"s.pageName",eVar36:"s.slug"}}}),a.on("reg_after_comment",function(){o.track("comment")}),a.on("reg_handler_click",function(t){var a=(t.handler||"").replace("Handler","");o.src=e(t).closest(r.get("nav2Selector")).length?"navbar2":e(t).closest(".so-reg-login").length?"comment":o.src,/profile|newsletter/.test(a)&&(o.track(a),n.track(a))})}(),o.poll("body",function(){a.on("reg_after_logout",function(e){e?r.set("successfulLoginRedirect","${refresh}"):o.redirectUser(g.href)}),p.nav._update();var e=(o.querys=o.url.get)(g);"false"==l.getTos()&&c.user.logout(),e.ssopscn||e.linked?c._load(function(){o.modalClose(e)}):e.h_token?c.showPasswordResetDialog({tokens:e}):e.modal&&p.showDialog(e.modal),trb.userTiming("reg before push"),p.push.apply(p,d),trb.userTiming("reg after main")})}!("on"in t.fn)&&t.extend(t.fn,{on:t.fn.bind,off:t.fn.unbind}),trb.userTiming("reg after jquery"),n(t,{productCode:e.reg_product_code,registrationHostname:e.reg_hostname,ssorBaseUrl:e.reg_ssor_base_url||"ssor.tribdss.com",signInUrl:e.reg_signin_url,signUpUrl:e.reg_signup_url,navProfileUrl:e.reg_nav_profile_url,navNewsletterUrl:e.reg_newsletter_url,navSelector:e.reg_nav_container_selector,nav2Selector:e.reg_nav2_selector,navigationCSS:'[data-reg-rendered]{z-index:2147483605}[data-reg-text]:before{content:attr(data-reg-text)}[data-reg-username]:before{content:attr(data-reg-username)}[data-reg-handler][data-reg-username],[data-reg-loggedin] [data-reg-handler=signInHandler],[data-reg-loggedin] [data-reg-handler=signUpHandler],[data-reg-loggedin] [data-reg-role=navspace],[data-reg-role=minimodal]{display:none}[data-reg-handler],[data-reg-loggedin] [data-reg-username]{display:inline-block}[data-reg-role=navspace]{display:inline}[data-reg-loggedin] .navShow[data-reg-role=minimodal],[data-reg-loggedin] [data-reg-rendered].navShow [data-reg-role=minimodal]{display:block}[data-reg-role=base] [data-reg-role=minimodal]{contain:layout style}.tS12{zoom:1}.bar-dss{display:flex}.so-reg-login{margin-bottom:5px}.bar-dss [data-reg-role^=button] .met-flyout a{line-height:13px;margin-left:5px;padding:3px 0;height:32px;width:208px}.bar-dss [data-reg-handler=signInHandler]{min-width:82px}.bar-dss [data-reg-role=button_desktop] a:first-line{font-size:12px}.bar-dss [data-reg-role=button_tablet]{display:none}.bar-dss [data-reg-role=button_tablet] .met-flyout a{font-size:9px;width:88px}@media screen and (max-width:799px){.bar-dss [data-reg-role=button_tablet]{display:block}.bar-dss [data-reg-handler=signInHandler]:after,.bar-dss [data-reg-role=button_desktop]{display:none}.bar-dss [data-reg-handler=signInHandler]{min-width:16px}}@media screen and (max-width:414px){.bar-dss [data-reg-role=button_tablet]{display:none}}.bar-dss [data-reg-handler=signUpHandler],.bar-dss [data-reg-role=navspace],[data-reg-role=minimodal]{display:none!important}.bar-dss [data-reg-handler=signInHandler],.bar-dss [data-reg-handler=toggleNavigation]{touch-action:none;margin-left:15px;text-align:center;line-height:32px;padding:0 10px;color:#FFF;order:2}.bar-dss [data-reg-handler=signInHandler]:before{content:"\\F090";font-family:FontAwesome;font-size:16px}.bar-dss [data-reg-handler=signInHandler]:after{font:9px "Benton Black",Arial,sans-serif;white-space:nowrap;letter-spacing:1px;margin-left:10px;content:"LOG IN";position:relative;top:-2px}.bar-dss [data-reg-handler=toggleNavigation]:before{content:"\\F2BE";font-family:FontAwesome;font-size:16px}.bar-dss [data-reg-handler]:focus,.bar-dss [data-reg-handler]:hover{text-decoration:none!important;border:none}',successfulLoginRedirect:e.reg_successful_login_redirect||"",dialogJS:"latarc-dialog-1q2w3-17721005898464409256.min.js",metricsAccountId:e.reg_metrics_account_id,regCookieDomain:e.reg_cookie_domain})}({reg_successful_login_redirect:"${refresh}",reg_metrics_account_id:"tribnglobal",reg_signup_url:"https://checkout.latimes.com/subscriptionPanel/?presentation=MTRDigital&PID=4634&zipCode=00000&int=nav2",reg_product_code:"latarc",reg_nav2_selector:'[role="navigation"]',reg_hostname:"https://latimes.signon.trb.com",reg_nav_profile_url:"http://membership.latimes.com/profile",reg_newsletter_url:"http://newsletters.latimes.com",reg_ssor_base_url:"ssor.tribdss.com",reg_nav_container_selector:"[data-reg-role~=base], #memberLoginInfo"}):(trb.runInfuse||(trb.runInfuse=[])).push(e)}();